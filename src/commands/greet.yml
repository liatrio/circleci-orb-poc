description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  to:
    type: string
    default: "World"
    description: "Hello to whom?"
steps:
  - run:
      environment:
        PARAM_TO: <<parameters.to>>
      name: Hello Greeting
      command: <<include(scripts/greet.sh)>>


# parameters:
#   account-url:
#     default: AWS_ECR_ACCOUNT_URL
#     type: env_var_name
#   role-arn:
#     default: AWS_ASSUME_ROLE
#     type: env_var_name
#   role-session-name:
#     default: default
#     type: string
#   aws-region:
#     default: AWS_DEFAULT_REGION
#     type: env_var_name
# steps:
#   - run:
#       name: Assume Specified Role
#       command: |
#         assumed_role=$(aws sts assume-role --role-arn $<<parameters.role-arn>> --role-session-name <<parameters.role-session-name>>)
#         aws_access_key_id=$(echo $assumed_role | jq .Credentials.AccessKeyId | xargs)
#         aws_secret_access_key=$(echo $assumed_role | jq .Credentials.SecretAccessKey | xargs)
#         aws_session_token=$(echo $assumed_role | jq .Credentials.SessionToken | xargs)
#         export AWS_ACCESS_KEY_ID=$aws_access_key_id
#         export AWS_SECRET_ACCESS_KEY=$aws_secret_access_key
#         export AWS_SESSION_TOKEN=$aws_session_token
#         aws sts get-caller-identity
#         aws ecr get-login-password --region $<<parameters.aws-region>> | docker login --username AWS --password-stdin $<<parameters.account-url>>
